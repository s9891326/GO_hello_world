# 第十一章練習題

## 練習 1：圖形計算器

創建一個支援多種圖形的計算器系統：

要求：
- 定義 Shape 接口（面積、周長、描述）
- 實現多種圖形類型（矩形、圓形、三角形、多邊形）
- 支援圖形的組合操作（聯合、相交）
- 實現圖形工廠模式
- 添加圖形的比較和排序功能
- 支援圖形的序列化和反序列化

## 練習 2：插件系統

設計一個可擴展的插件系統：

要求：
- 定義插件接口（初始化、執行、清理、元信息）
- 實現多種插件類型（數據處理、文件操作、網路服務）
- 支援插件的動態加載和卸載
- 實現插件管理器
- 添加插件依賴關係處理
- 支援插件的配置和狀態管理

## 練習 3：數據處理管道

實現一個數據處理管道系統：

要求：
- 定義處理器接口（Process、Setup、Teardown）
- 實現多種處理器（過濾器、轉換器、聚合器、驗證器）
- 支援管道的組合和鏈式調用
- 實現錯誤處理和恢復機制
- 添加處理進度和統計信息
- 支援並行處理和批處理

## 練習 4：通知系統

創建一個多渠道通知系統：

要求：
- 定義通知接口（發送、驗證、格式化）
- 實現多種通知方式（郵件、短信、推送、Webhook）
- 支援通知模板和個性化
- 實現通知優先級和重試機制
- 添加通知歷史和統計
- 支援通知的批量發送和調度

## 練習 5：存儲抽象層

設計一個通用的存儲抽象層：

要求：
- 定義存儲接口（CRUD、查詢、事務）
- 實現多種存儲後端（內存、文件、數據庫、緩存）
- 支援數據的序列化和壓縮
- 實現連接池和緩存機制
- 添加存儲監控和性能統計
- 支援數據遷移和備份

## 練習 6：服務發現系統

實現一個微服務發現系統：

要求：
- 定義服務接口（註冊、發現、健康檢查）
- 實現多種發現機制（靜態配置、DNS、註冊中心）
- 支援服務的負載均衡和故障轉移
- 實現服務監控和指標收集
- 添加服務版本管理和灰度發布
- 支援服務的動態配置和熱更新

## 提示

1. 保持接口小而專注，遵循單一職責原則
2. 使用接口組合而不是大而全的接口
3. 合理使用空接口，避免失去類型安全
4. 善用類型斷言和類型開關
5. 考慮接口的向前兼容性
6. 使用依賴注入提高代碼可測試性

## 預期輸出範例

### 練習 1 輸出：
```
=== 圖形計算器測試 ===
創建圖形：
  矩形 (5×3): 面積=15.00, 周長=16.00
  圓形 (r=2): 面積=12.57, 周長=12.57
  三角形 (3,4,5): 面積=6.00, 周長=12.00

圖形工廠：
  ✅ 創建矩形: Rectangle(10×8)
  ✅ 創建圓形: Circle(r=3.5)
  ❌ 未知圖形類型: pentagon

圖形排序（按面積）：
  1. 三角形: 6.00
  2. 矩形: 15.00
  3. 圓形: 12.57

總面積: 33.57
```

### 練習 2 輸出：
```
=== 插件系統測試 ===
載入插件：
  ✅ DataProcessor v1.0 - 數據處理插件
  ✅ FileHandler v2.1 - 文件操作插件  
  ✅ NetworkService v1.5 - 網路服務插件

執行插件：
  📊 DataProcessor: 處理了 100 條記錄
  📁 FileHandler: 處理了 5 個文件
  🌐 NetworkService: 發送了 3 個請求

插件狀態：
  DataProcessor: 運行中 (CPU: 15%, 內存: 50MB)
  FileHandler: 空閒 (CPU: 2%, 內存: 20MB)
  NetworkService: 運行中 (CPU: 8%, 內存: 30MB)
```

### 練習 3 輸出：
```
=== 數據處理管道測試 ===
創建管道: 過濾器 -> 轉換器 -> 驗證器 -> 聚合器

處理數據: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

管道執行：
  🔍 過濾器: 保留偶數 -> [2, 4, 6, 8, 10]
  🔄 轉換器: 平方處理 -> [4, 16, 36, 64, 100]
  ✅ 驗證器: 數據有效 -> [4, 16, 36, 64, 100]
  📊 聚合器: 求和 -> 220

處理統計：
  總記錄數: 10
  處理成功: 5
  處理時間: 15ms
  吞吐量: 333 records/sec
```